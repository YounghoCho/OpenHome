<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--namespace,id는 DAOImp에, 그리고 id는 Controller에도 있다.-->
<!-- mapper는 한개만 온다 -->
<mapper namespace="board">
	<!-- 멘토님 -->
	<select id="mapMessagelist" resultType="com.worksmobile.OpenHomeProject.dto.MessageDTO">
		SELECT 
			@ROWNUM := @ROWNUM +1 as ROWNUM,
			m.board_num, m.message_num, message_subject, message_sample, message_date, message_writer
		FROM 
			message m, ( SELECT @ROWNUM := 0 ) R
		WHERE
			board_num= #{boardNumberInt}
		LIMIT 
			#{startNum}, #{pageSize} 
	</select>		


	<select id="count_list" resultType="com.worksmobile.OpenHomeProject.dto.MessageDTO">
		SELECT 
			COUNT('message_num') as countAll
		FROM 
			message
		WHERE
			board_num= #{boardNumberInt}
	</select>
			
	<select id="messageInfo" resultType="com.worksmobile.OpenHomeProject.dto.MessageDTO">
		SELECT 
			message_subject, message_content, message_date, message_writer, message_pwd, board_num, message_num
		FROM 
			message
		WHERE
			message_num= #{originalMessageNum}
	</select>
</mapper>